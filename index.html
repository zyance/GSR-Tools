<!DOCTYPE html>
<html lang="de">
<head> 
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Google Fonts: Fira Sans
     wird vom Browser fr√ºh geladen, wichtig f√ºr sauberes Rendering -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

<!-- App Stylesheet
     enth√§lt Layout, Farben, Komponenten -->
<link rel="stylesheet" href="assets/css/style.css">
<title>Gr√ºnderzeithaus Sanierungs-Berater</title>

<style>

/* =====================================================
   GRUNDVARIABLEN
   zentrale Farben f√ºr die App
===================================================== */
:root{
  --hellgrau:#f2f2f2;
  --mittelgrau:#b5b5b5;
  --textgrau:#333333;
  --baukult:#7090a7;
}

/* =====================================================
   BASIS-EINSTELLUNGEN
===================================================== */
* {
  box-sizing: border-box; /* saubere Breitenberechnung */
}

html {
  font-size: 20px; /* Basis f√ºr rem-Werte */
}

body {
  margin: 0;
  padding: 20px 0;
  min-height: 100vh;

  display: flex;
  justify-content: center;
  align-items: flex-start;

  font-family: "Fira Sans", Arial, system-ui, sans-serif;
  font-weight: 300;
  font-size: 1rem;
  line-height: 1.5;

  color: var(--textgrau);
  background-color: #5c88a1; /* baukult Hintergrund */
}

/* =====================================================
   TYPOGRAFIE
===================================================== */
h1, h2, h3 {
  font-family: "Fira Sans", Arial, sans-serif;
  font-weight: 500;
  color: var(--textgrau);
}

.note {
  font-size: 1rem;
  color: #666;
  line-height: 1.5;
}

/* =====================================================
   APP-RAHMEN
===================================================== */
.app-container {
  width: 100%;
  max-width: 600px;
  background: #ffffff;
  box-shadow: 0 10px 25px rgba(0,0,0,0.25);
}

.header-image img {
  width: 100%;
  height: auto;
  display: block;
}

.content {
  padding: 5%;
  text-align: center;
}

/* =====================================================
   BOXEN (Abschnitte)
===================================================== */
.box {
  width: 92%;
  margin: 3% auto;
  padding: 3%;
  background: #fff;
  border: 1px solid var(--hellgrau);
  border-radius: 6px;
}

.summary-box {
  background: var(--hellgrau);
}

/* =====================================================
   FORMULARFELDER
===================================================== */
input[type="number"],
input[type="text"] {
  width: 33%;
  padding: 8px;
  font-size: 1rem;

  border: 1px solid var(--mittelgrau);
  border-radius: 4px;

  /* Inputs m√ºssen IMMER klickbar sein */
  position: relative;
  z-index: 10;
  pointer-events: auto;
}

/* =====================================================
   BUTTONS
===================================================== */
button {
  background: var(--baukult);
  color: #fff;
  border: none;
  border-radius: 6px;

  padding: 12px 24px;
  font-size: 1rem;
  font-family: "Fira Sans", Arial, sans-serif;
  font-weight: 500;

  cursor: pointer;
}

button:hover {
  background: #5a7a91;
}

.box button {
  display: block;
  margin: 0 auto;
}

/* =====================================================
   GRID-BUTTONS (Bauphase, Dachform etc.)
===================================================== */
.grid-container {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.grid-btn {
  background: #cbddec;
  border: 1px solid var(--textgrau);
  border-radius: 6px;
  padding: 6px;
  cursor: pointer;
}

.grid-btn:hover {
  background: #e0e0e0;
}

.grid-btn.active {
  background: #ffffff;
  border-color: #000;
  border-width: 2px;
}

/* Grid-Buttons: Bild ist rein visuell, Interaktion l√§uft √ºber den Button */
.grid-btn img {
  width: 100%;
  display: block;
  pointer-events: none; /* verhindert Hover/Klick-Blockade */
}

/* =====================================================
   ACCORDION (auf/zu Bereiche)
===================================================== */
.accordion-header {
  background: var(--hellgrau);
  padding: 12px;
  border-radius: 6px;

  display: flex;
  justify-content: space-between;

  font-weight: 500;
  cursor: pointer;
  user-select: none;
}

.accordion-header:hover {
  background: var(--mittelgrau);
}

.accordion-content {
  display: none;
  padding-top: 12px;
}

.accordion-content.open {
  display: block;
}

/* =====================================================
   SLIDER (Fensteralter, Raumtemperatur)
===================================================== */
input[type="range"] {
  width: 100%;
  height: 20px;
  appearance: none;
  border-radius: 10px;
  cursor: pointer;
}

/* Slider-Knopf */
input[type="range"]::-webkit-slider-thumb,
input[type="range"]::-moz-range-thumb {
  width: 24px;
  height: 24px;
  background: #333;
  border-radius: 50%;
  border: none;
  cursor: pointer;
}

/* Fensteralter: alt links, neu rechts */
#fensterAlter {
  direction: rtl;
}

/* =====================================================
   SWITCH (Dachausrichtung S√ºd / Ost-West)
===================================================== */
.switch {
  position: relative;
  display: inline-block;
  width: 60px;
  height: 34px;

  /* begrenzt den Klickbereich */
  z-index: 1;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

/* Sichtbarer Slider-Hintergrund */
.slider {
  position: absolute;
  inset: 0;

  background-color: #7090a7;
  border-radius: 15px;
  transition: .3s;

  /* GANZ WICHTIG:
     darf KEINE Klicks abfangen */
  pointer-events: none;
}

/* beweglicher Punkt */
.slider:before {
  content: "";
  position: absolute;

  width: 26px;
  height: 26px;
  left: 4px;
  bottom: 4px;

  background-color: white;
  border-radius: 50%;
  transition: .3s;
}

input:checked + .slider:before {
  transform: translateX(26px);
}

/* =====================================================
   ZUSAMMENFASSUNG
===================================================== */
#summaryText ul {
  list-style: none;
  padding: 0;
  margin: 0;
  text-align: left;
}

#summaryText li {
  padding: 6px 0;
  border-bottom: 1px solid #ddd;
}

#summaryText li:last-child {
  border-bottom: none;
}

/* =====================================================
   AUSWERTUNGSTEXT
===================================================== */
#auswertungText {
  white-space: pre-wrap;
  line-height: 1.6;
  font-size: 1rem;
}

</style>
</head>

<body>
<!-- ANFANG BODY -->

<!-- HEADER IMAGE -->
<div class="app-container">
  <div class="header-image">
    <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjmDFrR6H0SJzmUI-Xgbh8cxS77152EE03Bg4_NISF-KsvKkc_VYMBeLft6zowFFEGykT2BZiIZF2FTWeOFj2_mbipFBhvPxde2jmFi3MNH2WH7bmB-esFDNXSs81xeW5E10n-1CaK0zFiItf1Oqgece8P7Nd7vzyUxZwsjxBL90cNdXkg9QojJbGw19xTD/s1600/baukult_logo.png" alt="Gr√ºnderzeithaus Sanierungs-Berater">
  </div>

<!-- WELCOME txt -->
  <div class="content">
    <h2>‚ÄûWillkommen beim<br/>Gr√ºnderzeithaus-Helfer!"</h2>
    <span class="note">
      <i>"Wenn Sie f√ºr Ihr Gr√ºnderzeithaus in Wien ein <b>Bauwerksbuch</b> ben√∂tigen oder das Haus <b>umfassend sanieren</b> wollen, kann ich Ihnen schon nach Eingabe von wenigen Daten eine fundierten Rat f√ºr die n√§chsten Schritte geben ‚Äì was f√ºr Ihr Geb√§ude empfehlenswert ist und worauf Sie achten sollten. Diese App ersetzt keine professionelle Beratung, gibt Ihnen aber hilfreiche Anregungen."</i>
    </span>
  </div> 

<!-- BAUPHASEN GRID -->
  <div class="box">
    <h3>Die 4 Bauphasen der Gr√ºnderzeit</h3>
    <p class="note"><i>‚ÄûGibt einen ersten √úberblick √ºber das Alter des Geb√§udes.‚Äú</i></p>

<!-- Hidden Field f√ºr JS -->
    <input type="hidden" id="bauphase">

<!-- VORGR√úNDERZEIT -->
    <div class="grid-container">
      <button type="button" class="grid-btn bauphase-btn" data-value="Vorgr√ºnderzeit">
        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhUJQbWEiAwi2YpJ0I3i34aj5FQRKXj-Aa2JN9VoI_pO8u_TW1RVqZ2y1fFtM_Xz1UiMBQLNKCak_SengSak4sxTXVAXIbavA8h2sM8Fd7GxiBzO4RbFHXGmqHaF5wyhk9vNsGV2hTHufyue2m2s7xKFW260864UI2ZSJB8g7yoL3Fi4wuBEZQnCTTqxSvi/s1600/GZH%201.png"
             alt="Vorgr√ºnderzeit">
      </button>

<!-- FR√úHGR√úNDERZEIT -->
      <button type="button" class="grid-btn bauphase-btn" data-value="Fr√ºhgr√ºnderzeit">
        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiU-lTfM-GbSoXqmU-u24LAXatmvm7-I-yCleGa-c1vtgMJVmQc9uB6iTx60a6S5kXBdnctf2_TbHWvRKJcGEr9Zvs1Iiu5RhwMNCu_sYdhlR70TqqO7G_duPLcDrmuk5SkYj_srz2vZ2Ih0-BOf_u4kX1315-lnmup1kkpeUQApK6puZRhoHn-YIdqwISB/s1600/GZH%202.png"
             alt="Fr√ºhgr√ºnderzeit">
      </button>

<!-- HOCHGR√úNDERZEIT -->
      <button type="button" class="grid-btn bauphase-btn" data-value="Hochgr√ºnderzeit">
        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhc4dtrSvVD31xXKk3Rug97KO_eeTFzLT2MRphI_mJ8QKYQE-_VlaMmNsYDArBi8aVJQxUh6PuV3euSQ0KLbgMNvsIMHQvjVfITQD8WteeVmFKvKfwtI4FzKPCF-iHnDbT9RKPA9a9qc2jzQw3YY85GHJ8D9K1HQmomgk-osU1bqyg8BWp-4nDpRyjveNwH/s1600/GZH%203.png"
             alt="Hochgr√ºnderzeit">
      </button>

<!-- SP√ÑTGR√úNDERZEIT -->
      <button type="button" class="grid-btn bauphase-btn" data-value="Sp√§tgr√ºnderzeit">
        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjrSkEcslltNNOj2-kxBQ5P4ARPIh_oHy4-HD7XSZjnw7QhMwWWSjqzfv61ukdjRsOV49sePy6IKA5oGm-VDfVdnv7hul-UUpG1EyrrLnu1ag9wetSR0ELGFn_wsMlvp00zMUkI5KEXpVq2evm2TwxewWe5xZFpjLPcZ0MfKkxvp9urwRDt5OsU_emqDwY7/s320/GZH%204.png"
             alt="Sp√§tgr√ºnderzeit">
      </button>
    </div>
  </div>

<!-- EIGENT√úMER UND BEWOHNER -->
<!-- *********************** -->
  <div class="box">
    <h3 style="margin-top: 24px;">Eigent√ºmer und Bewohner:</h3>
    <label><input type="checkbox" id="eigentuemer"> Allein- oder Mehrheitseigent√ºmer:in</label><br>
    <label><input type="checkbox" id="weg"> Eigent√ºmergemeinschaft (WEG)</label><br>
    <label><input type="checkbox" id="mieter"> Mieter:in</label><br> 
    <label><input type="checkbox" id="hausverwaltung"> Hausverwaltung</label><br>
    <label><input type="checkbox" id="energieberater"> Energieberater:in</label><br>
  </div> 

<!-- ******************* -->
<!-- ANGABEN ZUM GEB√ÑUDE -->
<!-- ******************* -->
<div class="box">
  <h3>Angaben zum Geb√§ude</h3>
  <p class="note"><i>"Die Eigenschaften des Geb√§udes sind Grundlage aller Berechnungen."</i></p>

  <label>Wohnfl√§che (m¬≤)</label><br>
  <!-- Gesamtfl√§che des Geb√§udes in Quadratmetern -->
  <input type="number" id="area_m2"><br><br>

  <label>Geschosse (inkl. EG)</label><br>
  <!-- Anzahl der oberirdischen Geschosse inkl. Erdgeschoss -->
  <input type="number" id="floor_count"><br><br>

  <label>Fenster pro Geschoss</label><br>
  <!-- Durchschnittliche Anzahl der Fenster je Geschoss -->
  <input type="number" id="windows_per_floor"><br><br>

  <label>Postleitzahl</label><br>
  <!-- Postleitzahl des Gr√ºnderzeithauses (Wien: 4-stellig) -->
  <input type="number" id="postal_code"><br><br>
</div>

<!-- ******************** -->
<!-- THERMISCHE SANIERUNG -->
<!-- ******************** -->
  <div class="box">
    <div class="accordion-header" onclick="toggleAccordion(this)">
      <span>Thermische Sanierung</span><span>‚ñº</span>
    </div>
    <div class="accordion-content">

      <h3>Die Bebauung des Grundst√ºcks</h3>
      <p class="note"><i>"Entscheidend f√ºr W√§rmeverluste und Gr√∂√üe der Fassaden."</i></p>

<!-- BEBAUUNG -->
<!-- ******** -->
<!-- Art der Bebauung des Grundst√ºcks -->
<input type="hidden" id="building_type">

<div class="grid-container">

<!-- FREISTEHEND -->
  <button type="button" class="grid-btn building-btn" data-value="Freistehend">
    <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhf9_tkMIji4Fw90CxZdIypq36VnUt_BvdS5TdyJnGWTsgTkyCQOnR7WVPxJPwXy4reqiq6zo7jxzBOCaqr53-Ryof2li9ilAtvTyPMF2JFm5hXBG1xRyCr1A5iHSbwh803EEwkURODNPvPHIPjeKUU2ze2IzKy50r5j758gwTjVlQfHkKAgmFyzbSJFRQA/s320/BAU_1.png"
         alt="Freistehend">
  </button>

<!-- ECKHAUS -->
  <button type="button" class="grid-btn building-btn" data-value="Eckhaus">
    <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiQT8QYouomyMbKyoJg0OkZyWSqPqAsnJkVluCABhFkXnruSOMsP99pJMxivSk4HI6JxVyQbcyOBF7S-CHYKeByfoy8tzGCCR8P_yLNYzsz6X_yVMhyphenhyphen7qlZVvC3P2BXtlne33ncJ9gwm7pQhRLYS6urrHGdNAknGUO-FQOSz8h56Vm5iIcLhHVZcUIn33d5/s320/BAU_2.png"
         alt="Eckhaus">
  </button>

<!-- GESCHLOSSENE BAUWEISE -->
  <button type="button" class="grid-btn building-btn" data-value="Geschlossene Bauweise">
    <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhtR4trn47VMw7LTCzHycsfRxTPdkjJ1iLC5tehQqLzyW4NmKnea8E3KVOgpf_jhwvIQMsCsNsCcBYcXDsBSdqBKhnNKHD6pxKPx6Fce93nDthHdMPhYLYoJAC6RYO1JrwTE1mQ0-HfZW_-BBCMRc31DAf6_Qpy8rTUubtp9Ftb1IA1R4F_-cKmaapp7O_r/s320/BAU_3.png"
         alt="Geschlossene Bauweise">
  </button>

<!-- MIT HINTERHAUS -->
  <button type="button" class="grid-btn building-btn" data-value="Mit Hinterhaus">
    <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjA8-IH0KQi74v_fHFrc6mw2mdQtF9VbfyBhlfUHstxVyDBnMR54PFe4qPQ8MR0Ou1nfl8W9lxRmTTMoKYuJNBgnHzsnViDZFeUDK9pBS0B3rYa2ieeTATUvVEt43ii_1YB1Cp9ENxR9e3xQHZtUMgi3vJ8uIxRZGlbkqIiTkqS8xqT_8CThQoMsozyXEyE/s320/BAU_4.png"
         alt="Mit Hinterhaus">
  </button>

</div>


<!-- ZUSTAND DES HAUSES -->
<!-- ****************** -->
      <h3>Zustand des Hauses:</h3>
      <p class="note" style="margin-top: 20px;"><i>"Der Zustand entscheidet √ºber den Umfang der Sanierungsarbeiten."</i></p>
      <label><input type="radio" name="haus_zustand" value="schlecht"> dringend sanierungsbed√ºrftig</label><br>
      <label><input type="radio" name="haus_zustand" value="zufrieden"> zufriedenstellend</label><br>
      <label><input type="radio" name="haus_zustand" value="sehr gut"> ausgezeichnet, gepflegt</label><br>

<!-- ART DER FENSTER -->
<!-- *************** -->
      <h3>Art der Fenster:</h3>
      <p class="note" style="margin-top: 20px;"><i>"Der W√§rmeverlust √ºber alte, undichte Fenster kann erheblich sein."</i></p>
      <label><input type="radio" name="fenster_art" value="Kastenfenster"> Wiener Kastenfenster</label><br>
      <label><input type="radio" name="fenster_art" value="2-fach"> 2-fach</label><br>
      <label><input type="radio" name="fenster_art" value="3-fach"> 3-fach</label><br>

<!-- ALTER DER FENSTER -->
<!-- ***************** -->
<!--
  P2 / Future Note:
  Der Farbverlauf des Sliders ist hier bewusst INLINE gesetzt.
  Grund:
  ‚Äì Der Verlauf bildet eine inhaltliche Bewertung ab (gr√ºn = gut, gelb = mittel, rot = schlecht).
  ‚Äì In P1 war eine schnelle, visuell verst√§ndliche L√∂sung wichtiger als Wiederverwendbarkeit.

  In P2 sollte der Gradient:
  ‚Äì in CSS ausgelagert werden (z. B. √ºber Klassen oder CSS-Variablen)
  ‚Äì optional dynamisch an den Slider-Wert angepasst werden (JS),
    damit Farbe und Bewertung immer konsistent bleiben.

  Wichtig:
  Der Slider ist logisch ‚Äûalt ‚Üí neu‚Äú gedacht (rechts = neu),
  deshalb ist die Richtung bewusst `to left` gesetzt.
-->
      <h3 style="margin-top: 20px;">Alter der Fenster: <span id="fensterWert">25</span> Jahre</h3>
      <input type="range" id="fensterAlter" min="1" max="50" value="25" style="background:linear-gradient(to left,#4caf50 1%,#4caf50 30%,#fbc02d 30%,#fbc02d 60%,#e53935 60%,#e53935 100%)">
      <div class="slider-label"><span>sehr alt</span><span>neuwertig</span></div>
    </div>
  </div>


<!-- ********************** -->
<!-- HEIZUNG UND WARMWASSER -->
<!-- ********************** -->
<div class="box">
  <div class="accordion-header" onclick="toggleAccordion(this)">
    <span>Heizung & Warmwasser</span><span>‚ñº</span>
  </div>
  <div class="accordion-content">
    <p class="note"><i>"Die Umstellung auf erneuerbare Energie ist oft Hauptziel der Sanierung."</i></p>

    <h3>Bestehendes HZ und WW System</h3>
    <label><input type="checkbox" id="fernwaerme"> Fernw√§rme, zentral</label><br>
    <label><input type="checkbox" id="gas"> Gas / √ñl, zentral</label><br>
    <label><input type="checkbox" id="dezGas"> Gasthermen, dezentral</label><br>
    <label><input type="checkbox" id="elektrisch"> Elektrisch, dezentral</label>

<!-- WOHNKOMFORT -->
<!-- *********** -->
    <h3 style="margin-top: 20px;">Wohnkomfort</h3>
    <p class="note"><i>"Das subjektive W√§rme- oder K√§lteempfinden entscheidet √ºber die Behaglichkeit."</i></p>

    <h3>Raumklima: <span id="tempWert">21</span> ¬∞C</h3>
    <input type="range" id="raumtemp" min="17" max="25" value="21" style="background:linear-gradient(to right,#b3e5fc 0%,#e57373 100%)">
    <div class="scale"><span>17¬∞</span><span>19¬∞</span><span>21¬∞</span><span>23¬∞</span><span>25¬∞</span></div>
    <div class="rating">Empfinden: <span id="tempText">angenehm</span></div>
  </div>
</div>

<!-- ******************* -->
<!-- PHOTOVOLTAIC ANLAGE -->
<!-- ******************* -->
<div class="box">
  <div class="accordion-header" onclick="toggleAccordion(this)">
    <span>Photovoltaik-Anlage</span><span>‚ñº</span>
  </div>
  <div class="accordion-content">
    <h3>Die Dachform</h3>
    <input type="hidden" id="dachform">
    <p class="note"><i>"Gibt Auskunft √ºber den Stromertrag eine PV-Anlage."</i></p>

<!-- DACHFORM -->
<!-- ******** -->
    <div class="grid-container">
      <button type="button" class="grid-btn dachform-btn" data-value="Satteldach">
        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgQRtaL69qeHPxzfZvdug64juBuEkvjkGY3-bEC3C0uc07Pus0c3nRHlSgKn3BvnUzKpVh6G_RWBgcWjbVmCvYK17OISI9H3BaNi3f17KQ8m6CiQljzkgRdA5uJuIMfEruLlPrGJvrj6W3TneRBJcCXqU5IJUitvBSw08HIlHI2f5cjGeim8JgLmXkINF_k/s320/DACH_1.png" alt="Satteldach">
      </button>

      <button type="button" class="grid-btn dachform-btn" data-value="Satteldach mit Gauben">
        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhp9eaBs2FIL7K04CdA0vq8Ddi2oibTa5PCcQR5dlZz-8-X8vUFTLL4CUaewqQL93FczbZTCQ4JhBv1-dBBU8P5fHAPI86xK_06-q1UDaYW3JJwi_GzIgjHoJgtcxIvVpIPlOz00IVURg9hwz5F_0VuUVuxJ8mg0d4qBcMpq7BZdQx52WIwreNh5U4wMmXx/s320/DACH_2.png" alt="Satteldach mit Gauben">
      </button>

      <button type="button" class="grid-btn dachform-btn" data-value="Mansarddach">
        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhT1wPuN97D1yW7hLl-rB7G4EwYUWIq8DeI42ffdW3OHIQkKLpo5GX3uBry1t2CnrpiKluplfFoPYFF87SLTigt6lYJQYltDYWukwNAztSy1ZefVEK9ktFd-ZPuhoxPNjtJtTwzGllxItu-2lAsOgzG8N8BJ0Ee_fUhZDkcwhURIwDVi0nKMEbM41ZyZJW7/s320/DACH_3.png" alt="Mansarddach">
      </button>

      <button type="button" class="grid-btn dachform-btn" data-value="Walmdach">
        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEha87YkqXQLZK8E43kfOdRd1NZ-EwaxuMDQjq3Lj_CumrS5EkBXGEnsle3FmmP433vr3ZU0dEDGsPEUPNp_sjT727DMGo1XgURFRvGmT8rJ7NnBTa-dvxpctALsK7eDOAsZAAcWk2grgC4lLvMMDa4CGQV8FrhiqL_nLJhjv7MdNAVzqVAYXlLnUFHy8iad/s320/DACH_4.png" alt="Walmdach">
      </button>
    </div>

<!-- DACHAUSRICHTUNG -->
<!-- *************** -->
    <h3 style="margin-top: 20px;">Dachausrichtung:</h3>
    <input type="hidden" id="pv_ausrichtung" value="S√ºd">
    <div class="main-wrapper">
      <span id="label-sued" class="label label-left is-active">S√ºd</span>
      <label class="switch">
        <input type="checkbox" id="dachAusrichtung">
        <span class="slider"></span>
      </label>
      <span id="label-ow" class="label label-right">Ost/West</span>
    </div>  
  </div> 
</div> 

<!-- ZIELE DER SANIERUNG -->
<!-- ******************** -->
<div class="box">
  <div class="accordion-header" onclick="toggleAccordion(this)">
    <span>Ziele der Sanierung</span><span>‚ñº</span>
  </div>

  <div class="accordion-content">
    <p class="note"><i>"F√ºr die erfolgreiche Sanierung braucht es klare Ziele."</i></p>
    <label><input type="checkbox" id="kosten_senken"> Kosten senken</label><br>
    <label><input type="checkbox" id="komfort"> Komfort steigern</label><br>
    <label><input type="checkbox" id="gaslos"> Raus aus Gas und √ñl</label><br>
    <label><input type="checkbox" id="klima"> Klimaschutz</label>
  </div>
</div>

<!-- ZUSAMMENFASSUNG -->
<!-- **************** -->
<div class="box summary-box">
  <h3>Zusammenfassung</h3>
  <p class="note"><i>"√úberpr√ºfen Sie nochmal Ihre Eingaben."</i></p>
  <div id="summaryText">Noch keine Eingaben.</div>
</div>

<!-- ZUR AUSWERTUNG -->
<!-- **************** -->
<div class="box">
  <button type="button" onclick="weiter()">Zur Auswertung</button>
</div>

<div class="box summary-box" id="auswertungBox" style="display:none;">
  <h3>Erste Einsch√§tzung ‚Äì Phase 1</h3>
  <div id="auswertungText" class="note"></div>
  <a id="downloadLink" style="display:none;" download>Download user_data</a>
</div>

<!-- ENDE BODY -->


<script>
/* =====================================================
   ACCORDION FUNCTION
   steuert √ñffnen/Schlie√üen der Akkordeon-Bereiche
===================================================== */
function toggleAccordion(header) {
  var content = header.nextElementSibling;
  var arrow = header.querySelector("span:last-child");
  if (!content) return;

  content.classList.toggle("open");
  if (arrow) {
    arrow.textContent = content.classList.contains("open") ? "‚ñ≤" : "‚ñº";
  }
}

/* =====================================================
   HELPER FUNCTIONS
===================================================== */

/* GET STRING */
function getString(id) {
  var el = document.getElementById(id);
  if (!el) return null;
  return el.value !== "" ? el.value : null;
}

/* GET NUMBER */
function getNumber(id) {
  var el = document.getElementById(id);
  if (!el) return null;
  if (el.value === "") return null;
  var n = Number(el.value);
  return Number.isFinite(n) ? n : null;
}

/* GET RADIO */
function getRadio(name) {
  var checked = document.querySelector('input[name="' + name + '"]:checked');
  return checked ? checked.value : null;
}

/* =====================================================
   COLLECT DATA
   (IDs must match HTML exactly)
===================================================== */
function collectData() {

  /* heating systems */
  var heating = [];
  if (document.getElementById("fernwaerme")?.checked) heating.push("Fernw√§rme");
  if (document.getElementById("gas")?.checked) heating.push("Gas / √ñl zentral");
  if (document.getElementById("dezGas")?.checked) heating.push("Gasthermen dezentral");
  if (document.getElementById("elektrisch")?.checked) heating.push("Elektrisch");

  /* renovation goals */
  var goals = [];
  if (document.getElementById("kosten_senken")?.checked) goals.push("Kosten senken");
  if (document.getElementById("komfort")?.checked) goals.push("Komfort steigern");
  if (document.getElementById("gaslos")?.checked) goals.push("Raus aus Gas und √ñl");
  if (document.getElementById("klima")?.checked) goals.push("Klimaschutz");

  /* roles */
  var roles = [];
  if (document.getElementById("eigentuemer")?.checked) roles.push("Eigent√ºmer:in");
  if (document.getElementById("weg")?.checked) roles.push("WEG");
  if (document.getElementById("mieter")?.checked) roles.push("Mieter:in");
  if (document.getElementById("hausverwaltung")?.checked) roles.push("Hausverwaltung");
  if (document.getElementById("energieberater")?.checked) roles.push("Energieberater:in");

  return {
    building_phase: getString("bauphase"),
    building_type: getString("building_type"),
    roles: roles,
    living_area_m2: getNumber("area_m2"),            // Wohnfl√§che
floors_total: getNumber("floor_count"),          // Geschosse
windows_per_floor: getNumber("windows_per_floor"), // Fenster/Geschoss
postal_code: getNumber("postal_code"),           // PLZ
    building_condition: getRadio("haus_zustand"),
    window_type: getRadio("fenster_art"),
    window_age_years: getNumber("fensterAlter"),
    heating: heating,
    indoor_temp_c: getNumber("raumtemp"),
    roof_type: getString("dachform"),
    roof_orientation: getString("pv_ausrichtung"),
    goals: goals
  };
}

/* =====================================================
   SUMMARY UPDATE
===================================================== */

function updateSummary() {
  var d = collectData();
  var box = document.getElementById("summaryText");
  if (!box) return;

  // Anfangszustand
  if (
    !d.building_phase &&
    d.living_area_m2 === null &&
    d.floors_total === null
  ) {
    box.innerHTML = "Noch keine Eingaben.";
    return;
  }

  // Zusammenfassung anzeigen
  box.innerHTML =
    "<ul>" +
    "<li>Bauphase: " + (d.building_phase ?? "‚Äì") + "</li>" +
    "<li>Wohnfl√§che: " + (d.living_area_m2 !== null ? d.living_area_m2 + " m¬≤" : "‚Äì") + "</li>" +
    "<li>Geschosse: " + (d.floors_total ?? "‚Äì") + "</li>" +
    "<li>Fenster/Geschoss: " + (d.windows_per_floor ?? "‚Äì") + "</li>" +
    "<li>Postleitzahl: " + (d.postal_code ?? "‚Äì") + "</li>" +
    "<li>Bebauung: " + (d.building_type ?? "‚Äì") + "</li>" +
    "<li>Zustand: " + (d.building_condition ?? "‚Äì") + "</li>" +
    "<li>Fenster: " + (d.window_type ?? "‚Äì") +
      (d.window_age_years !== null ? " (" + d.window_age_years + " Jahre)" : "") +
    "</li>" +
    "<li>Heizung: " + (d.heating.length ? d.heating.join(", ") : "keine Angabe") + "</li>" +
    "<li>Raumklima: " + (d.indoor_temp_c !== null ? d.indoor_temp_c + " ¬∞C" : "‚Äì") + "</li>" +
    "<li>Dach: " + (d.roof_type ?? "‚Äì") + " / " + (d.roof_orientation ?? "‚Äì") + "</li>" +
    "<li>Ziele: " + (d.goals.length ? d.goals.join(", ") : "keine Angabe") + "</li>" +
    "</ul>";
}

/* =====================================================
   SLIDER EVENTS
===================================================== */
var fensterAlter = document.getElementById("fensterAlter");
if (fensterAlter) {
  fensterAlter.addEventListener("input", function () {
    var out = document.getElementById("fensterWert");
    if (out) out.textContent = this.value;
    updateSummary();
  });
}

var raumtemp = document.getElementById("raumtemp");
if (raumtemp) {
  raumtemp.addEventListener("input", function () {
    var out = document.getElementById("tempWert");
    if (out) out.textContent = this.value;
    var txt = "angenehm";
    if (this.value < 20) txt = "eher k√ºhl";
    if (this.value > 22) txt = "eher warm";
    var t = document.getElementById("tempText");
    if (t) t.textContent = txt;
    updateSummary();
  });
}

/* =====================================================
   GRID BUTTONS
===================================================== */
function setupGridButtons(buttonClass, hiddenInputId) {
  var buttons = document.querySelectorAll("." + buttonClass);
  var hiddenInput = document.getElementById(hiddenInputId);
  if (!hiddenInput) return;

  buttons.forEach(function (btn) {
    btn.addEventListener("click", function () {
      buttons.forEach(function (b) { b.classList.remove("active"); });
      btn.classList.add("active");
      hiddenInput.value = btn.dataset.value || "";
      updateSummary();
    });
  });
}

setupGridButtons("bauphase-btn", "bauphase");
setupGridButtons("building-btn", "building_type");
setupGridButtons("dachform-btn", "dachform");

/* =====================================================
   ROOF ORIENTATION SWITCH
===================================================== */
var dachSwitch = document.getElementById("dachAusrichtung");
var pvInput = document.getElementById("pv_ausrichtung");
var labelSued = document.getElementById("label-sued");
var labelOW = document.getElementById("label-ow");

if (dachSwitch && pvInput) {
  function updateRoofOrientation() {
    if (dachSwitch.checked) {
      pvInput.value = "Ost/West";
      labelOW?.classList.add("is-active");
      labelSued?.classList.remove("is-active");
    } else {
      pvInput.value = "S√ºd";
      labelSued?.classList.add("is-active");
      labelOW?.classList.remove("is-active");
    }
    updateSummary();
  }
  dachSwitch.addEventListener("change", updateRoofOrientation);
  updateRoofOrientation();
}

/* =====================================================
   EXPORT & NAVIGATION ‚Äì TESTFLOW: INDEX ‚Üí PHP ‚Üí RESULT
===================================================== */

window.weiter = function () {

  const data = collectData();

  localStorage.setItem("gzh_raw_data", JSON.stringify(data));

  // optionaler Ping an echten Server
  fetch("https://app.sunsunsun.at/wien/gzh/php/save_user_data.php", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ ping: "index_alive" })
  }).catch(() => { /* absichtlich leer */ });

  // üëâ RICHTIGER PFAD F√úR GITHUB
  window.location.href = "result.html";
};




/* =====================================================
   RESULT + LOADER ‚Äì JSON-SICHER (FINAL)
===================================================== */

document.addEventListener("DOMContentLoaded", function () {

  const RESULT_KEY = "gzh_result_text";

  const loader    = document.getElementById("loader");
  const resultBox = document.getElementById("resultText");

  if (!loader || !resultBox) return;

  loader.style.display = "block";
  resultBox.style.display = "none";

  // WICHTIG: absoluter Pfad laut realer URL
  fetch("https://app.sunsunsun.at/wien/gzh/php/save_user_data.php", {
    method: "POST",
    cache: "no-store",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      input: {}
    })
  })
  .then(r => r.text())   // zuerst TEXT, robust
  .then(txt => {
    loader.style.display = "none";
    resultBox.style.display = "block";

    // Rohantwort anzeigen
    resultBox.innerText = txt || "LEERE ANTWORT VON PHP";

    // optional: JSON auswerten
    try {
      const res = JSON.parse(txt);
      if (res && res.screen_text) {
        localStorage.setItem(RESULT_KEY, res.screen_text);
        resultBox.innerText = res.screen_text;
      }
    } catch (e) {
      // absichtlich leer
    }
  })
  .catch(() => {
    loader.style.display = "none";
    resultBox.style.display = "block";
    resultBox.innerText = "FETCH FEHLER (NETZ / PFAD)";
  });

});





/* =====================================================
   INITIALIZE
===================================================== */
updateSummary();

document
  .querySelectorAll('input')
  .forEach(el => {
    el.addEventListener("change", updateSummary);
    el.addEventListener("input", updateSummary);
  });
</script>

<!--
=====================================================
P2 / FUTURE DEVELOPMENT NOTES ‚Äì SAN.APP P1
=====================================================

Diese Datei bildet den stabilen Stand von Phase P1 ab.
Fokus von P1 war:
‚Äì Verst√§ndlichkeit f√ºr Nicht-Techniker
‚Äì visuelle Plausibilit√§t
‚Äì robuste, einfache Logik
‚Äì keine Optimierung auf Wiederverwendbarkeit

Bewusste P1-Entscheidungen:
‚Äì Inline-Styles bei Slidern (z. B. Farbverl√§ufe) zur schnellen visuellen Bewertung
‚Äì Inline-onclick bei Accordion-Headern f√ºr maximale Transparenz
‚Äì Keine dynamischen Farb-/Skalenberechnungen
‚Äì Klare, explizite IDs statt abstrakter Datenmodelle

P2 ‚Äì m√∂gliche, aber NICHT verpflichtende Schritte:
1) Slider-Styles (z. B. Fensteralter, Raumtemperatur)
   ‚Äì Farbverl√§ufe in CSS auslagern
   ‚Äì optional dynamisch per JS an Slider-Wert koppeln

2) Accordion-Logik
   ‚Äì optional Event-Listener statt Inline-onclick
   ‚Äì nur wenn zus√§tzliche Logik (Tracking, Analytics) n√∂tig wird

3) Summary-Rendering
   ‚Äì aktuell bewusst simpel (innerHTML)
   ‚Äì erst in P2/P3 auf Templates oder Komponenten umstellen

4) Struktur
   ‚Äì Trennung in CSS / JS-Dateien nur dann,
     wenn mehrere Pages dieselbe Logik teilen

WICHTIG:
P1-Code ist NICHT ‚Äûunsauber‚Äú, sondern bewusst einfach.
√Ñnderungen in P2 d√ºrfen keine bestehenden Interaktionen verschlechtern.
=====================================================
-->




</body>
</html>

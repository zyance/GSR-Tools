function collectData() {
  // Bauphase für Benutzer (Text) und Server (Zahl) aus globaler Variable
  const bauphaseName = window.selectedBauphase?.name || null;
  const bauphaseNum  = window.selectedBauphase?.num  || null;

  // Rollen
  const roles = [];
  if (document.getElementById("eigentuemer")?.checked) roles.push("Eigentümer:in");
  if (document.getElementById("weg")?.checked) roles.push("WEG");
  if (document.getElementById("mieter")?.checked) roles.push("Mieter:in");
  if (document.getElementById("hausverwaltung")?.checked) roles.push("Hausverwaltung");
  if (document.getElementById("energieberater")?.checked) roles.push("Energieberater:in");

  // Heizung
  const heating = [];
  if (document.getElementById("fernwaerme")?.checked) heating.push("Fernwärme");
  if (document.getElementById("gas")?.checked) heating.push("Gas / Öl zentral");
  if (document.getElementById("dezGas")?.checked) heating.push("Gasthermen dezentral");
  if (document.getElementById("elektrisch")?.checked) heating.push("Elektrisch");

  // Ziele
  const goals = [];
  if (document.getElementById("kosten_senken")?.checked) goals.push("Kosten senken");
  if (document.getElementById("komfort")?.checked) goals.push("Komfort steigern");
  if (document.getElementById("gaslos")?.checked) goals.push("Raus aus Gas und Öl");
  if (document.getElementById("klima")?.checked) goals.push("Klimaschutz");

  const fensterAlterJahre = window.currentWindowAgeYears ?? null;

  return {
    building_phase_name: bauphaseName, // für User
    building_phase_num: bauphaseNum,   // für Server / PDF
    building_type: getString("building_type"),
    roles: roles,
    living_area_m2: getNumber("area_m2"),
    floors_total: getNumber("floor_count"),
    windows_per_floor: getNumber("windows_per_floor"),
    postal_code: getNumber("postal_code"),
    building_condition: getRadio("haus_zustand"),
    window_type: getRadio("fenster_art"),
    window_age_years: fensterAlterJahre,
    heating: heating,
    indoor_temp_c: getNumber("raumtemp"),
    roof_type: getString("dachform"),
    roof_orientation: getString("pv_ausrichtung"),
    goals: goals
  };
}
